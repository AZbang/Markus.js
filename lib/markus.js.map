{"version":3,"sources":["webpack://markus/webpack/universalModuleDefinition","webpack://markus/webpack/bootstrap","webpack://markus/./src/Parser.js","webpack://markus/./src/View.js","webpack://markus/./src/elements/App.js","webpack://markus/./src/elements/Block.js","webpack://markus/./src/elements/Button.js","webpack://markus/./src/elements/Display.js","webpack://markus/./src/elements/Element.js","webpack://markus/./src/elements/Resources.js","webpack://markus/./src/elements/Scenes.js","webpack://markus/./src/elements/Sprite.js","webpack://markus/./src/elements/Styles.js","webpack://markus/./src/elements/Text.js","webpack://markus/./src/elements/index.js","webpack://markus/./src/index.js","webpack://markus/./src/utils.js"],"names":["Parser","data","loadType","filepath","Promise","resolve","imports","then","entry","getImports","files","i","length","Error","replace","path","presets","parsePresets","split","generateTree","pathes","push","fetch","res","status","text","name","slice","all","tree","depth","j","type","value","Object","assign","props","unshift","lines","preset","parsePreset","line","getDepth","attr","getAttr","element","getElement","tags","getTags","getValue","id","getId","getProps","test","Number","match","map","v","query","tag","prop","parseValue","find","key","View","onReady","customElms","elements","registerElements","childList","parser","parseMarkfile","add","ticker","PIXI","Ticker","dt","updateElements","start","elms","tick","parent","Array","isArray","addPreset","get","removeElement","parentElement","el","index","indexOf","onRemove","splice","DisplayObject","removeChild","stage","selector","q","parseQuery","isAll","isSelectorOfElement","concat","elm","isEl","isId","isTags","App","view","width","window","innerWidth","height","innerHeight","sharedTicker","sharedLoader","defaultProps","smooth","document","body","appendChild","style","resolution","addEventListener","resize","mark","renderer","marginTop","scale","set","backgroundColor","settings","SCALE_MODE","SCALE_MODES","NEAREST","LINEAR","Application","Block","markus","inlineItems","Container","Button","interactive","buttonMode","on","console","log","toScene","scene","Display","superclass","arg","x","y","addTick","_computedPosition","w","contentW","h","contentH","left","centerX","right","top","centerY","bottom","rotation","DEG_TO_RAD","RAD_TO_DEG","_right","_centerX","_left","_bottom","_centerY","_top","Element","ticks","updateProps","addChild","undefined","cb","Resources","root","loaders","Loader","Scenes","_scene","remove","Sprite","Texture","WHITE","_src","texture","fromImage","Styles","styles","Text","fontSize","fill","fontFamily","isSubsetArray","subset","isInclude"],"mappings":"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","file":"markus.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"markus\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"markus\"] = factory();\n\telse\n\t\troot[\"markus\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","export default class Parser {\r\n  constructor(data) {\r\n    this.loadType = data.loadType || 'ajax';\r\n  }\r\n  parseMarkfile(filepath) {\r\n    return new Promise((resolve) => {\r\n      this.imports([filepath]).then((data) => {\r\n        let entry = data[0].data;\r\n        let imports = this.getImports(entry);\r\n\r\n        this.imports(imports).then((files) => {\r\n          for(let i = 0; i < files.length; i++) {\r\n            if(this.getImports(files[i].data).length) throw Error('Imports are possible only in the entry file.')\r\n            entry = entry.replace('import ' + files[i].path, files[i].data);\r\n          }\r\n\r\n          let presets = this.parsePresets(entry.split('\\n'));\r\n          resolve(this.generateTree(presets));\r\n        })\r\n      })\r\n    })\r\n  }\r\n  imports(pathes) {\r\n    let files = [];\r\n    for(let i = 0; i < pathes.length; i++) {\r\n      if(this.loadType === 'ajax') {\r\n        files.push(fetch(pathes[i])\r\n          .then((res) => {\r\n            if(res.status === 404) throw Error('Markus module \"' + pathes[i] + '\" is not found');\r\n            return res.text()\r\n          }).then((data) => {\r\n            return {name: pathes[i].split('/').slice(-1)[0], path: pathes[i], data}\r\n          })\r\n        )\r\n      }\r\n    }\r\n    return Promise.all(files);\r\n  }\r\n  generateTree(presets) {\r\n    let tree = [];\r\n    for(let i = presets.length-1; i >= 0; i--) {\r\n      if(presets[i].depth !== 0) {\r\n        for(let j = i-1; j >= 0; j--) {\r\n          if(presets[j].depth < presets[i].depth) {\r\n\r\n            if(presets[i].type === 'valueNode') {\r\n              if(presets[j].type === 'elementNode')\r\n                presets[j].value = presets[i].value + (presets[j].value ? '\\n' + presets[j].value : '');\r\n              else if(presets[j].type === 'propNode') {\r\n                if(presets[j].value === true) presets[j].value = '';\r\n                presets[j].value = presets[i].value + (presets[j].value ? '\\n' + presets[j].value : '');\r\n              } else throw Error('valueNode cannot be a child of a ' + presets[j].type);\r\n            }\r\n\r\n            if(presets[i].type === 'propNode') {\r\n              if(presets[j].type === 'propNode') {\r\n                if(typeof presets[j].value !== 'object') presets[j].value = {value: presets[j].value};\r\n                Object.assign(presets[j].value, {[presets[i].name]: presets[i].value})\r\n              } else if(presets[j].type === 'elementNode') {\r\n                Object.assign(presets[j].props, {[presets[i].name]: presets[i].value})\r\n              } else throw Error('propNode cannot be a child of a ' + presets[j].type);\r\n            }\r\n\r\n            else if(presets[i].type === 'elementNode') {\r\n              if(presets[j].type === 'elementNode') presets[j].presets.unshift(presets[i]);\r\n              else throw Error('elementNode cannot be a child of a ' + presets[j].type);\r\n            }\r\n\r\n            break;\r\n          }\r\n        }\r\n      } else tree.push(presets[i]);\r\n    }\r\n    return   tree;\r\n  }\r\n  parsePresets(lines) {\r\n    let presets = [];\r\n    for(let i = 0; i < lines.length; i++) {\r\n      let preset = this.parsePreset(lines[i]);\r\n      if(preset != null) presets.push(preset);\r\n    }\r\n    return presets;\r\n  }\r\n  parsePreset(line) {\r\n    let type = 'elementNode';\r\n    let depth = this.getDepth(line);\r\n\r\n    // if line is attr node\r\n    let attr = this.getAttr(line);\r\n    if(attr) {\r\n      type = 'propNode';\r\n      return {type, depth, name: attr[0], value: attr[1]}\r\n    }\r\n\r\n    // else line is element, empty or value node\r\n    let element = this.getElement(line);\r\n    let tags = this.getTags(line);\r\n    let value = this.getValue(line);\r\n    let id = this.getId(line);\r\n    let props = [];\r\n\r\n    // if element is undefined, then line is block or value node\r\n    if(element == null) {\r\n      if(tags.length || id) element = '';\r\n      else if(value) type = 'valueNode';\r\n      else return;\r\n    }\r\n\r\n    // if line is elementNode, then parse props\r\n    if(type !== 'valueNode') {\r\n      props = this.getProps(line);\r\n    }\r\n\r\n    return {type, element, value, props, tags, id, depth, presets: []};\r\n  }\r\n  parseValue(value) {\r\n    if(value === 'on' || value === 'yes' || value === 'true') return true;\r\n    else if(value === 'off' || value === 'no' || value === 'false') return false;\r\n    else if(/^[-\\.\\+]?[0-9]+\\.?([0-9]+)?$/.test(value)) return Number(value);\r\n    return value;\r\n  }\r\n  getImports(data) {\r\n    return (data.match(/import .+/g) || []).map((v) => v.split(' ')[1]);\r\n  }\r\n  getDepth(line) {\r\n    return (line.match(/^[\\t ]+/) || [''])[0].length/2;\r\n  }\r\n  parseQuery(query) {\r\n    let tags = (query.match(/\\.\\w+/g) || []).map((tag) => tag.slice(1));\r\n    let id = (query.match(/\\#\\w+/) || [''])[0].slice(1);\r\n    let element = (query.match(/^\\w+/) || [])[0];\r\n    return {element, id, tags}\r\n  }\r\n  getElement(line) {\r\n    return (line.match(/^[\\t ]*(\\w+)/) || [])[1];\r\n  }\r\n  getTags(line) {\r\n    return (line.replace(/\\(.+\\)/, '').match(/\\.\\w+/g) || []).map((tag) => tag.slice(1));\r\n  }\r\n  getId(line) {\r\n    return (line.replace(/\\(.+\\)/, '').match(/#\\w+/) || [''])[0].slice(1);\r\n  }\r\n  getValue(line) {\r\n    return (line.match(/\\| *(.+)/) || [])[1] || '';\r\n  }\r\n  getAttr(line) {\r\n    let prop = line.match(/^[\\t ]*@(\\w+)(\\s(.+))?/);\r\n    if(prop) return [prop[1], prop[3] != null ? this.parseValue(prop[3]) : true]\r\n  }\r\n  getProps(line) {\r\n    let res = {};\r\n    let find = line.match(/\\((.+)\\)/g);\r\n    if(find == null) return {};\r\n\r\n    let props = find[0].split(/,\\s+/);\r\n    for(let key in props) {\r\n      let prop = props[key].replace('(', '').replace(')', '').split('=');\r\n      res[prop[0]] = prop[1] != null ? this.parseValue(prop[1]) : true;\r\n    }\r\n    return res;\r\n  }\r\n}\r\n","import Parser from './Parser'\r\nimport * as elements from './elements'\r\nimport {isSubsetArray} from './utils'\r\n\r\nexport default class View {\r\n  constructor(filepath, onReady, customElms={}) {\r\n    this.elements = elements;\r\n    this.registerElements(customElms);\r\n\r\n    this.childList = [];\r\n\r\n    this.parser = new Parser({loadType: 'ajax'});\r\n    this.parser.parseMarkfile(filepath).then(tree => {\r\n      this.add(tree);\r\n      onReady && onReady(this);\r\n    });\r\n\r\n    this.ticker = new PIXI.ticker.Ticker();\r\n    this.ticker.add(dt => this.updateElements(dt));\r\n    this.ticker.start();\r\n  }\r\n\r\n  registerElements(elms) {\r\n    Object.assign(this.elements, elms);\r\n  }\r\n\r\n  updateElements(dt, elms=this.childList) {\r\n    for(let i = 0; i < elms.length; i++) {\r\n      elms[i].tick && elms[i].tick(dt);\r\n      this.updateElements(dt, elms[i].childList);\r\n    }\r\n  }\r\n\r\n  // add element\r\n  add(value, parent=this) {\r\n    let res = []\r\n\r\n    if(typeof value === 'string') value = this.parser.parsePreset(value);\r\n    if(!Array.isArray(value)) return this.addPreset(value, parent);\r\n    for(let i = 0; i < value.length; i++) {\r\n      res.push(this.addPreset(value[i], parent));\r\n    }\r\n    return res;\r\n  }\r\n  addPreset(preset, parent=this) {\r\n    if(preset.type !== 'elementNode') throw Error('Preset cannot be activate. His type is not elementNode');\r\n    if(!this.elements[preset.element]) throw Error('Element \"' + preset.element + '\" is not defined');\r\n    return new this.elements[preset.element](this, parent, preset);\r\n  }\r\n\r\n  // remove element\r\n  remove(value, parent=this) {\r\n    if(typeof value === 'string') value = this.get(value, parent);\r\n    if(!Array.isArray(value)) value = [value];\r\n    for(let i = 0; i < value.length; i++) {\r\n      this.removeElement(value[i], value[i].parentElement);\r\n    }\r\n  }\r\n  removeElement(el, parent=this) {\r\n    let index = parent.childList.indexOf(el);\r\n    if(index !== -1) {\r\n      el.onRemove && el.onRemove();\r\n      parent.childList.splice(index, 1);\r\n      if(el instanceof PIXI.DisplayObject) {\r\n        if(parent instanceof PIXI.DisplayObject) parent.removeChild(el);\r\n        else parent.stage.removeChild(el);\r\n      }\r\n    }\r\n  }\r\n\r\n  // find element\r\n  get(selector, parent=this) {\r\n    let q = this.parser.parseQuery(selector);\r\n    return this.find(q, parent.childList);\r\n  }\r\n  getAll(selector, parent=this) {\r\n    let q = this.parser.parseQuery(selector);\r\n    return this.find(q, parent.childList, true);\r\n  }\r\n  find(q, elms=[], isAll=false) {\r\n    let res = [];\r\n    for(let i = 0; i < elms.length; i++) {\r\n      if(this.isSelectorOfElement(q, elms[i])) {\r\n        if(isAll) res.push(elms[i]);\r\n        else return elms[i];\r\n      }\r\n\r\n      if(elms[i].childList.length) {\r\n        let find = this.find(q, elms[i].childList, isAll);\r\n        if(!isAll && find) return find;\r\n        else res = res.concat(find);\r\n      }\r\n    }\r\n    return isAll ? res : null;\r\n  }\r\n  isSelectorOfElement(q, elm) {\r\n    let isEl = q.element ? q.element === elm.element : true;\r\n    let isId = q.id ? q.id === elm.id : true;\r\n    let isTags = isSubsetArray(elm.tags, q.tags);\r\n\r\n    return isEl && isId && isTags;\r\n  }\r\n}\r\n","import Element from './Element'\r\n\r\nexport default class App extends Element(PIXI.Application) {\r\n  constructor(view, parent, data) {\r\n    super(view, parent, data, {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n      sharedTicker: false,\r\n      sharedLoader: false\r\n    });\r\n\r\n    this.defaultProps({\r\n      smooth: true,\r\n      width: 1920,\r\n      height: 1080\r\n    });\r\n\r\n    document.body.appendChild(this.view);\r\n    document.body.style = \"padding: 0; margin: 0; overflow: hidden; background: #000;\";\r\n\r\n    this.resolution = null;\r\n\r\n    window.addEventListener('resize', () => this.resize(this));\r\n    this.resize();\r\n  }\r\n\r\n  // properties\r\n  get color() {\r\n    return this.renderer.backgroundColor;\r\n  }\r\n  set color(v) {\r\n    this.renderer.backgroundColor = +v;\r\n  }\r\n  get smooth() {\r\n     return PIXI.settings.SCALE_MODE !== PIXI.SCALE_MODES.NEAREST;\r\n  }\r\n  set smooth(v) {\r\n    PIXI.settings.SCALE_MODE = v ? PIXI.SCALE_MODES.LINEAR : PIXI.SCALE_MODES.NEAREST;\r\n  }\r\n\r\n  init() {\r\n    this.mark.add(this.presets, this);\r\n  }\r\n  resize() {\r\n    this.resolution = window.innerWidth/this.width;\r\n    this.renderer.resize(window.innerWidth, this.height*this.resolution);\r\n    this.view.style.marginTop = window.innerHeight/2-this.height*this.resolution/2 + 'px';\r\n    this.stage.scale.set(this.resolution);\r\n  }\r\n}\r\n","import Display from './Display'\r\n\r\nexport default class Block extends Display(PIXI.Container) {\r\n  constructor(markus, parent, data) {\r\n    super(markus, parent, data);\r\n\r\n    this.defaultProps({\r\n      inlineItems: false\r\n    });\r\n\r\n    this.mark.add(data.presets, this);\r\n  }\r\n}\r\n","import Display from './Display'\r\n\r\nexport default class Button extends Display(PIXI.Container) {\r\n  constructor(mark, parent, data) {\r\n    super(mark, parent, data);\r\n\r\n    this.interactive = true;\r\n    this.buttonMode = true;\r\n    this.on('pointertap', () => {\r\n      console.log( this.mark.get('scenes'))\r\n      if(this.toScene) this.mark.get('scenes').scene = this.toScene;\r\n    });\r\n\r\n    this.mark.add(data.presets, this);\r\n  }\r\n}\r\n","import Element from './Element';\r\n\r\nexport default function Display(superclass) {\r\n  return class extends Element(superclass) {\r\n    constructor(view, parent, data, arg) {\r\n      super(view, parent, data, arg);\r\n\r\n      this.defaultProps({\r\n        x: 400, y: 400\r\n      });\r\n      this.addTick(() => this._computedPosition());\r\n    }\r\n\r\n    set angle(v) {\r\n      this.rotation = v*PIXI.DEG_TO_RAD;\r\n    }\r\n    get angle() {\r\n      return this.rotation*PIXI.RAD_TO_DEG;\r\n    }\r\n    set w(v) {\r\n      this.width = v;\r\n    }\r\n    set h(v) {\r\n      this.height = v;\r\n    }\r\n    set left(v) {\r\n      this._right = null;\r\n      this._centerX = null;\r\n      this._left = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get left() {\r\n      return this._left;\r\n    }\r\n\r\n    set right(v) {\r\n      this._left = null;\r\n      this._centerX = null;\r\n      this._right = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get right() {\r\n      return this._right;\r\n    }\r\n\r\n    set centerX(v) {\r\n      this._left = null;\r\n      this._right = null;\r\n      this._centerX = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get centerX() {\r\n      return this._centerX;\r\n    }\r\n\r\n    set top(v) {\r\n      this._bottom = null;\r\n      this._centerY = null;\r\n      this._top = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get top() {\r\n      return this._top;\r\n    }\r\n\r\n    set bottom(v) {\r\n      this._top = null;\r\n      this._centerY = null;\r\n      this._bottom = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get bottom() {\r\n      return this._bottom;\r\n    }\r\n\r\n    set centerY(v) {\r\n      this._top = null;\r\n      this._bottom = null;\r\n      this._centerY = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get centerY() {\r\n      return this._centerY;\r\n    }\r\n\r\n    _computedPosition() {\r\n      let w = this.parentElement.contentW || this.mark.get('app').width;\r\n      let h = this.parentElement.contentH || this.mark.get('app').height;\r\n\r\n      if(this.left != null) this.x = this.left;\r\n      else if(this.centerX != null) this.x = w/2+this.centerX;\r\n      else if(this.right != null) this.x = w-this.right;\r\n\r\n      if(this.top != null) this.y = this.top;\r\n      else if(this.centerY != null) this.y = h/2+this.centerY;\r\n      else if(this.bottom != null) this.y = h-this.bottom;\r\n    }\r\n  }\r\n}\r\n","export default function Element(superclass=class{}) {\r\n  return class extends superclass {\r\n    constructor(view, parent, preset, arg) {\r\n      super(arg);\r\n\r\n      this.mark = view;\r\n      this.element = preset.element;\r\n      this.id = preset.id;\r\n      this.tags = preset.tags;\r\n      this.presets = preset.presets;\r\n      this.parentElement = parent;\r\n      this.value = preset.value;\r\n\r\n      this.childList = [];\r\n      this.ticks = [];\r\n\r\n      this.mark.get('styles') && Object.assign(preset.props, this.mark.get('styles').get(this));\r\n      this.updateProps(preset.props);\r\n\r\n      parent && parent.childList.push(this);\r\n      if(this instanceof PIXI.DisplayObject) {\r\n        if(parent instanceof PIXI.DisplayObject) parent.addChild(this);\r\n        else parent.stage.addChild(this);\r\n      }\r\n    }\r\n\r\n    updateProps(props) {\r\n      for(let key in props) {\r\n        if(typeof this[key] === 'object') {\r\n          if(typeof props[key] === 'object') Object.assign(this[key], props[key]);\r\n          else if(this[key].set) this[key].set(props[key]);\r\n          if(props[key + 'X']) this[key].x = props[key + 'X'];\r\n          if(props[key + 'Y']) this[key].y = props[key + 'Y'];\r\n        } else this[key] = props[key];\r\n      }\r\n    }\r\n    defaultProps(props) {\r\n      for(let key in props) {\r\n        if(this[key] === undefined)\r\n          this.updateProps({[key]: props[key]});\r\n      }\r\n    }\r\n    addTick(cb) {\r\n      this.ticks.push(cb);\r\n    }\r\n    tick(dt) {\r\n      for(let i = 0; i < this.ticks.length; i++) {\r\n        this.ticks[i](dt);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Element from './Element'\r\n\r\nexport default class Resources extends Element(PIXI.loaders.Loader) {\r\n  constructor(markus, root, data) {\r\n    super(markus, root, data);\r\n\r\n    for(let key in data.props) {\r\n      this.add(key, data.props[key]);\r\n    }\r\n  }\r\n}\r\n","import Element from './Element'\r\n\r\nexport default class Scenes extends Element(PIXI.Container) {\r\n  constructor(view, parent, data) {\r\n    super(view, parent, data);\r\n  }\r\n  set scene(id) {\r\n    for(let i = 0; i < this.presets.length; i++) {\r\n      if(this.presets[i].id === id) {\r\n        this._scene && this.mark.remove(this._scene, this);\r\n        this._scene = this.mark.add(this.presets[i], this);\r\n      }\r\n    }\r\n  }\r\n  get scene() {\r\n    return this._scene;\r\n  }\r\n}\r\n","import Display from './Display'\r\n\r\nexport default class Sprite extends Display(PIXI.Sprite) {\r\n  constructor(mark, parent, data) {\r\n    super(mark, parent, data, PIXI.Texture.WHITE);\r\n  }\r\n  get src() {\r\n    return this._src;\r\n  }\r\n  set src(v) {\r\n    this._src = v;\r\n    this.texture = PIXI.Texture.fromImage(v);\r\n  }\r\n}\r\n","import Element from './Element'\r\n\r\n\r\nexport default class Styles extends Element() {\r\n  constructor(markus, root, data) {\r\n    super(markus, root, data)\r\n    this.styles = data.presets;\r\n  }\r\n  get(elm) {\r\n    let props = {};\r\n    for(let i = 0; i < this.styles.length; i++) {\r\n      if(this.mark.isSelectorOfElement(this.styles[i], elm))\r\n        Object.assign(props, this.styles[i].props);\r\n    }\r\n    return props;\r\n  }\r\n  set(selector, props) {\r\n    this.styles[selector] = props;\r\n  }\r\n}\r\n","import Display from './Display'\r\n\r\nexport default class Text extends Display(PIXI.Text) {\r\n  constructor(view, parent, data) {\r\n    super(view, parent, data);\r\n\r\n    if(this.value) this.text = this.value;\r\n  }\r\n  get size() {\r\n    return this.style.fontSize;\r\n  }\r\n  set size(v) {\r\n    this.style.fontSize = v;\r\n  }\r\n  get color() {\r\n    return this.style.fill;\r\n  }\r\n  set color(v) {\r\n    this.style.fill = v;\r\n  }\r\n  get font() {\r\n    return this.style.fontFamily;\r\n  }\r\n  set font(v) {\r\n    this.style.fontFamily = v;\r\n  }\r\n}\r\n","export { default as element } from './Element';\r\nexport { default as display } from './Display';\r\n\r\nexport { default as app } from './App';\r\nexport { default as resources } from './Resources';\r\nexport { default as styles } from './Styles';\r\n\r\nexport { default as scenes } from './Scenes';\r\nexport { default as button } from './Button';\r\n\r\nexport { default as block } from './Block';\r\nexport { default as sprite } from './Sprite';\r\nexport { default as text } from './Text';\r\n","export {default as Parser} from './Parser.js';\r\nexport {default as View} from './View.js';\r\nexport * from './elements';\r\n","export function isSubsetArray(set, subset) {\r\n  for(let i = 0; i < subset.length; i++) {\r\n    let isInclude = false;\r\n    for(let j = 0; j < set.length; j++) {\r\n      if(set[j] == subset[i]) {\r\n        isInclude = true;\r\n        break;\r\n      }\r\n    }\r\n    if(!isInclude) return false;\r\n  }\r\n  return true;\r\n}\r\n"],"sourceRoot":""}