{"version":3,"file":"markus.js","sources":["../src/Parser.js","../src/mixins/Element.js","../src/elements/App.js","../src/elements/Resources.js","../src/elements/Mixins.js","../src/elements/Store.js","../src/elements/Scenes.js","../src/mixins/Display.js","../src/elements/Sprite.js","../src/elements/Button.js","../src/elements/Block.js","../src/elements/Text.js","../src/elements/index.js","../src/mixins/index.js","../src/propPlugins.js","../src/utils.js","../src/main.js","../src/View.js","../src/index.js"],"sourcesContent":["/**\r\n * Marklang Parser\r\n * @example\r\n * const parser = new markus.Parser();\r\n * await parser.parseMarkfile('mark.view');\r\n * > [{type=\"elementNode\", element: 'app', props: {...}, presets: [...]}]\r\n * @class\r\n * @memberof markus\r\n * @param [loadType=ajax] {string} Method of loading markfile\r\n */\r\nexport default class Parser {\r\n  constructor(loadType='ajax') {\r\n    /**\r\n     * Method of loading markfile.\r\n     * @member {string}\r\n     */\r\n    this.loadType = loadType;\r\n  }\r\n\r\n  /**\r\n   * Parse markfile to AST presets\r\n   * @param filepath {string} file path to markfile\r\n   * @returns {Promise} Return promise with ast presets\r\n   *\r\n   * @example\r\n   * await parser.parseMarkfile(['./mark.view');\r\n   * > [{type=\"elementNode\", element: 'app', props: {...}, presets: [...]}]\r\n   */\r\n  parseMarkfile(filepath) {\r\n    return new Promise((resolve) => {\r\n      this.imports([filepath]).then((data) => {\r\n        let entry = data[0].data;\r\n        let imports = this.getImports(entry);\r\n\r\n        this.imports(imports).then((files) => {\r\n          for(let i = 0; i < files.length; i++) {\r\n            if(this.getImports(files[i].data).length) {\r\n              throw Error('Imports are possible only in the entry file.');\r\n            }\r\n            entry = entry.replace('import ' + files[i].path, files[i].data);\r\n          }\r\n\r\n          let presets = this.parsePresets(entry.split('\\n'));\r\n          resolve(this.generateTree(presets));\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Loaded markfiles from array pathes\r\n   * @param pathes {string[]} Patches to markfiles\r\n   * @returns {Promise}\r\n   *\r\n   * @example\r\n   * await parser.imports(['./mark.view', './resources.mark']);\r\n   * > [{name: 'mark.view', path: './mark.view', data: '...'}, {...}]\r\n   */\r\n  imports(pathes) {\r\n    let files = [];\r\n    for(let i = 0; i < pathes.length; i++) {\r\n      if(this.loadType === 'ajax') {\r\n        files.push(fetch(pathes[i])\r\n          .then((res) => {\r\n            if(res.status === 404) {\n              throw Error('Markus module \"' + pathes[i] + '\" is not found');\n            }\r\n            return res.text();\r\n          }).then((data) => {\r\n            return {name: pathes[i].split('/').slice(-1)[0], path: pathes[i], data};\r\n          })\r\n        );\r\n      }\r\n    }\r\n    return Promise.all(files);\r\n  }\r\n\r\n  /**\r\n   * Generates AST from presets based on type and depth properties of a preset.\r\n   * @param presets {Preset[]} List presets\r\n   * @returns {Array} AST presets\r\n   *\r\n   * @example\r\n   * parser.generateTree([\r\n   *   {type: 'elementNode', depth: 0, element: 'app'},\r\n   *   {type: 'elementNode', depth: 1, element: 'text'},\r\n   *   {type: 'propNode', depth: 2, name: 'text', value=''}\r\n   *   {type: 'valueNode', depth: 3, value='TEXT NODE'}\r\n   * ])\r\n   *\r\n   * > {type: 'elementNode', depth: 0, element: 'app', presets: [{\r\n   *     type: 'elementNode', depth: 1, element: 'text', props: {\r\n   *       text: 'TEXT NODE'\r\n   *     }}\r\n   *   }]\r\n   * }\r\n   */\r\n  generateTree(presets) {\r\n    let tree = [];\r\n    for(let i = presets.length-1; i >= 0; i--) {\r\n      if(presets[i].depth !== 0) {\r\n        for(let j = i-1; j >= 0; j--) {\r\n          if(presets[j].depth < presets[i].depth) {\r\n            let parent = presets[j];\r\n            let child = presets[i];\r\n\r\n            if(child.type === 'valueNode') {\r\n              if(parent.type === 'elementNode') {\n                parent.value = child.value + (parent.value ? '\\n' + parent.value : '');\n              }\r\n              else if(parent.type === 'propNode') {\r\n                if(parent.value === true) {\n                  parent.value = '';\n                }\r\n                parent.value = child.value + (parent.value ? '\\n' + parent.value : '');\r\n              }\n              else {\n                throw Error('valueNode cannot be a child of a ' + parent.type);\n              }\r\n            }\r\n            else if(child.type === 'propNode') {\r\n              if(parent.type === 'propNode') {\r\n                if(typeof parent.value === 'string') {\n                  parent.directory = parent.value;\n                  parent.value = {[parent.value]: {[child.name]: child.value}};\n                }\r\n                else if(parent.directory) {\r\n                  Object.assign(parent.value[parent.directory], {[child.name]: child.value});\r\n                }\r\n                else if(typeof parent.value === 'object' && parent.value != null) {\r\n                  Object.assign(parent.value, {[child.name]: child.value});\r\n                }\r\n                else {\r\n                  parent.value = {value: parent.value, [child.name]: child.value};\r\n                }\r\n              }\n              else if(parent.type === 'elementNode') {\r\n                if(Array.isArray(parent.props[child.name])) {\r\n                  parent.props[child.name].push(child.value);\r\n                }\r\n                else if(typeof parent.props[child.name] === 'object') {\r\n                  Object.assign(parent.props[child.name], child.value);\r\n                }\r\n                else if(parent.props[child.name]) {\r\n                  parent.props[child.name] = [parent.props[child.name], child.value];\r\n                }\r\n                else {\r\n                  parent.props[child.name] = child.value;\r\n                }\r\n              }\n              else {\n                throw Error('propNode cannot be a child of a ' + parent.type);\n              }\r\n            }\r\n            else if(child.type === 'elementNode') {\r\n              if(parent.type === 'elementNode') {\n                parent.presets.unshift(child);\n              }\r\n              else {\n                throw Error('elementNode cannot be a child of a ' + parent.type);\n              }\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      }\n      else {\n        tree.push(presets[i]);\n      }\r\n    }\r\n    return tree;\r\n  }\r\n\r\n  /**\r\n   * Parse marklang lines array to presets. Calls parser.parsePreset (line [i])\r\n   * @param lines {string[]} Strings with marklang markup\r\n   * @returns {Preset[]}\r\n  */\r\n  parsePresets(lines) {\r\n    let presets = [];\r\n    for(let i = 0; i < lines.length; i++) {\r\n      let preset = this.parsePreset(lines[i]);\r\n      if(preset != null) {\n        presets.push(preset);\n      }\r\n    }\r\n    return presets;\r\n  }\r\n\r\n  /**\r\n   * Parse marklang string to preset\r\n   * @param line {string} String with marklang markup\r\n   * @returns {Preset}\r\n   *\r\n   * @example\r\n   * parser.parsePreset('    text.tag#id(obj.visible = yes) | VALUE')\r\n   * > {\r\n   *   type: 'elementNode',\r\n   *   depth: 2\r\n   *   element: 'text',\r\n   *   id: 'id',\r\n   *   tags: ['tag'],\r\n   *   props: {obj: {visible: true}},\r\n   *   value: 'VALUE'\r\n   * }\r\n   *\r\n   * parser.parsePreset('    | VALUE TEXT')\r\n   * > {\r\n   *   depth: 2,\r\n   *   type: 'valueNode',\r\n   *   value: 'VALUE TEXT'\r\n   * }\r\n   *\r\n   * parser.parsePreset('  @prop .3324')\r\n   * > {\r\n   *   depth: 1,\r\n   *   type: 'propNode',\r\n   *   typeAttr: 'prop',\r\n   *   name: 'prop',\r\n   *   value: 0.3324\r\n   * }\r\n   *\r\n   * parser.parsePreset('  @move(10, 30)')\r\n   * > {\r\n   *   depth: 1,\r\n   *   type: 'propNode',\r\n   *   typeAttr: 'method',\r\n   *   name: 'move',\r\n   *   args: [10, 30]\r\n   * }\r\n   */\r\n  parsePreset(line) {\r\n    line = this.removeComment(line);\r\n\r\n    let type = 'elementNode';\r\n    let depth = this.getDepth(line);\r\n\r\n    // if line is attr node\r\n    let attr = this.getAttr(line);\r\n    if(attr) {\r\n      return {type: 'propNode', depth, name: attr[1], value: attr[2], typeAttr: attr[0]};\r\n    }\r\n\r\n    // else line is element, empty or value node\r\n    let element = this.getElement(line);\r\n    let tags = this.getTags(line);\r\n    let value = this.getValue(line);\r\n    let id = this.getId(line);\r\n    let props = [];\r\n\r\n    // if element is undefined, then line is block or value node\r\n    if(element == null) {\r\n      if(tags.length || id) {\n        element = '';\n      }\r\n      else if(value) {\n        type = 'valueNode';\n      }\r\n      else {\n        return;\n      }\r\n    }\r\n\r\n    // if line is elementNode, then parse props\r\n    if(type !== 'valueNode') {\r\n      props = this.getInlineAttrs(line);\r\n    }\r\n\r\n    return {type, element, value, props, tags, id, depth, presets: []};\r\n  }\r\n\r\n\r\n  /**\r\n   * Convert value from props with support js types\r\n   * @param value {string}\r\n   * @return {any} Parsed value\r\n   *\r\n   * @example\r\n   * parser.parseValue('no'|'off'|'false');\r\n   * > false\r\n   * parser.parseValue('yes'|'on'|'true');\r\n   * > true\r\n   * parser.parseValue('.5'|'+34'|'-34'|'3.32432');\r\n   * > Number\r\n   * parser.parseValue('anystring');\r\n   * > String\r\n   */\r\n  parseValue(value) {\r\n    if(value === 'on' || value === 'yes' || value === 'true') {\n      return true;\n    }\r\n    else if(value === 'off' || value === 'no' || value === 'false') {\n      return false;\n    }\r\n    else if(/^[-\\.\\+]?[0-9]+\\.?([0-9]+)?$/.test(value)) {\n      return Number(value);\n    }\r\n    return value;\r\n  }\r\n\r\n\r\n  /**\r\n   * Removes comment from markline\r\n   * @param line {string} line with marklang markup\r\n   * @returns {string} markline without comment\r\n   *\r\n   * @example\r\n   * removeComment('elm.tag // some comment')\r\n   * > 'elm.tag'\r\n   */\r\n  removeComment(line) {\r\n    return line.replace(/\\/\\/.+/, '');\r\n  }\r\n\r\n  /**\r\n   * Finds all import requests in the file from the `import path` construction\r\n   * @param data {string[]} lines array with marklang markup\r\n   * @returns {string[]} imports data\r\n   *\r\n   * @example\r\n   * parser.getImports([\r\n   *   'import resources.mark',\r\n   *   'app(w=1920, h=900)',\r\n   *   ' import scenes.mark'\r\n   * ].join('\\n'));\r\n   * > ['resources.mark', 'styles.mark']\r\n   */\r\n  getImports(data) {\r\n    return (data.match(/import .+/g) || []).map((v) => v.split(' ')[1]);\r\n  }\r\n\r\n  /**\r\n   * Getes comment from markline\r\n   * @param line {string} line with marklang markup\r\n   * @returns {string} Comment from markline\r\n   *\r\n   * @example\r\n   * getComment('elm.tag // some comment')\r\n   * > // some comment\r\n   */\r\n  getComment(line) {\r\n    return (line.match(/\\/\\/.+/)  || [''])[0];\r\n  }\r\n\r\n  /**\r\n   * Finds the depth of the entry element. Calculated by the number of tabs at the beginning of the line.\r\n   * @param line {string} line with marklang markup\r\n   * @returns {number} depth\r\n   *\r\n   * @example\r\n   * parser.getDepth(\"\\t\\t\\t\\t\")\r\n   * > 4\r\n   */\r\n  getDepth(line) {\r\n    return (line.match(/^[\\t ]+/) || [''])[0].length/2;\r\n  }\r\n\r\n  /**\r\n   * Parse query selector to object\r\n   * @param query {string} Query selector in marklang markup\r\n   * @returns {Object} Query selector in object\r\n   *\r\n   * @example\r\n   * parser.parseQuery('element.tag.tag2#id');\r\n   * > {element: 'element', tags: ['tag', 'tag2'], id: 'id'}\r\n   */\r\n  parseQuery(query) {\r\n    let tags = (query.match(/\\.\\w+/g) || []).map((tag) => tag.slice(1));\r\n    let id = (query.match(/\\#\\w+/) || [''])[0].slice(1);\r\n    let element = (query.match(/^\\w+/) || [])[0];\r\n    return {element, id, tags};\r\n  }\r\n\r\n  /**\r\n   * Get element name\r\n   * @param line {string} line with marklang markup\r\n   * @returns {string} element name from markline\r\n   *\r\n   * @example\r\n   * parser.getElement(\"sprite.tag#id(prop=data)\")\r\n   * > \"sprite\"\r\n   */\r\n  getElement(line) {\r\n    return (line.match(/^[\\t ]*(\\w+)/) || [])[1];\r\n  }\r\n\r\n  /**\r\n   * Extracts all element tags from .tag_name construction\r\n   * @param line {string} line with marklang markup\r\n   * @returns {string[]} element tags from markline\r\n   *\r\n   * @example\r\n   * parser.getTags(\"el.tag1#id.tag2.tag3\")\r\n   * > [\"tag1\", \"tag2\", \"tag3\"]\r\n   */\r\n  getTags(line) {\r\n    return (line.replace(/\\(.+\\)/, '').match(/\\.\\w+/g) || []).map((tag) => tag.slice(1));\r\n  }\r\n\r\n  /**\r\n   * Extracts the element id from the `#id_name` construction\r\n   * @param line {string} line with marklang markup\r\n   * @returns {string} element id from markline\r\n   *\r\n   * @example\r\n   * parser.getId(\"el.tag1#cat.tag2.tag3\")\r\n   * > \"cat\"\r\n   */\r\n  getId(line) {\r\n    return (line.replace(/\\(.+\\)/, '').match(/#\\w+/) || [''])[0].slice(1);\r\n  }\r\n\r\n  /**\r\n   * Extract text value from the `| .+` construction\r\n   * @param line {string} line with marklang markup\r\n   * @returns {string} element value from markline\r\n   *\r\n   * @example\r\n   * parser.getValue(\"| SOME VALUE \");\r\n   * > \"SOME VALUE \"\r\n   */\r\n  getValue(line) {\r\n    return (line.match(/\\| *(.+)/) || [])[1] || '';\r\n  }\r\n\r\n  /**\r\n   * Retrieves an element property from a `@prop value` and `$prop value` structure\r\n   * @param line {string} line with marklang markup\r\n   * @returns {string[]} attr from markline. [attrType, attrNane, attrValue]\r\n   *\r\n   * @example\r\n   * parser.getAttr(\"@prop on\")\r\n   * > ['propNode', \"prop\", true]\r\n   *\r\n   * parser.getAttr(\"@func(on, 20, text)\")\r\n   * > ['propNode', \"attr\", [true, 20, 'text']]\r\n   */\r\n  getAttr(line) {\r\n    let func = line.match(/^[\\t ]*\\@(\\w+)\\((.+)?\\)/);\r\n    if(func) {\r\n      let args = func[2] != null ? func[2].split(/,\\s+/).map(v => this.parseValue(v)) : [];\r\n      return ['method', func[1], function() {\r\n        this[func[1]].apply(this, args);\r\n      }];\r\n    }\r\n\r\n    let prop = line.match(/^[\\t ]*\\@(\\w+)(\\s(.+))?/);\r\n    if(prop) {\r\n      return ['prop', prop[1], prop[3] != null ? this.parseValue(prop[3]) : true];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Retrieves all element properties from the structure (prop = data, ...)\r\n   * @param line {string} line with marklang markup\r\n   * @returns {Object} element attrs from markline\r\n   *\r\n   * @example\r\n   * parser.getInlineAttrs(\"el(texture=cat.png, font= Bebas Neue, visible = off, some.point.x = .4)\")\r\n   * > {texture: \"cat.png\", font=\"Bebas Neue\", visible: false, some: {point: {x: .4}}}\r\n   */\r\n  getInlineAttrs(line) {\r\n    let res = {};\r\n    let find = line.match(/\\((.+)\\)/g);\r\n    if(find == null) {\n      return {};\n    }\r\n\r\n    let props = find[0].split(/,\\s+/);\r\n    for(let key in props) {\r\n      let prop = props[key].replace('(', '').replace(')', '').split('=');\r\n      let keys = prop[0].split('.');\r\n      let _prop = res;\r\n      for(let i = 0; i < keys.length; i++) {\r\n        if(keys[i+1]) {\n          _prop = _prop[keys[i]] = {};\n        }\r\n        else {\n          _prop[keys[i]] = prop[1] != null ? this.parseValue(prop[1]) : true;\n        }\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n}\r\n","// import {propPlugins} from '../main.js';\r\n\r\n/**\r\n * Mixin for additional functionality for all markus elements\r\n * @class Element\r\n * @param superclass {Class} Parent class\r\n * @memberof markus.mixins\r\n *\r\n * @example\r\n * let containerWithElementMix = new markus.mixins.Display(PIXI.Container);\r\n * containerWithElementMix({view, parent, ...preset}, argForParentClass);\r\n */\r\nexport default function Element(superclass=class{}) {\r\n  return class extends superclass {\r\n    constructor(preset, arg) {\r\n      super(arg);\r\n\r\n      /**\r\n       * Root view class\r\n       * @memberof markus.mixins.Element\r\n       * @member {markus.View}\r\n       */\r\n      this.mark = preset.view;\r\n\r\n      /**\r\n       * Element name\r\n       * @readonly\r\n       * @memberof markus.mixins.Element\r\n       * @member {string}\r\n       */\r\n      this.element = preset.element;\r\n\r\n      /**\r\n       * Presets list\r\n       * @memberof markus.mixins.Element\r\n       * @member {markus.View}\r\n       */\r\n      this.presets = preset.presets;\r\n\r\n      /**\r\n       * Element id\r\n       * @readonly\r\n       * @memberof markus.mixins.Element\r\n       * @member {string}\r\n       */\r\n      this.id = preset.id;\r\n\r\n      /**\r\n       * Element tags\r\n       * @memberof markus.mixins.Element\r\n       * @member {string[]}\r\n       */\r\n      this.tags = preset.tags.slice(0);\r\n\r\n      /**\r\n       * Parent node\r\n       * @memberof markus.mixins.Element\r\n       * @member {Element}\r\n       */\r\n      this.parentElement = preset.parent || preset.view;\r\n\r\n      /**\r\n       * Childs list\r\n       * @memberof markus.mixins.Element\r\n       * @member {Element[]}\r\n       */\r\n      this.childList = [];\r\n\r\n      /**\r\n       * Аrray of functions called every tick\r\n       * @memberof markus.mixins.Element\r\n       * @member {function[]}\r\n       */\r\n      this.ticks = [];\r\n\r\n      /**\r\n       * Element properties from markus markup\r\n       * @readonly\r\n       * @memberof markus.mixins.Element\r\n       * @member {function[]}\r\n       */\r\n      this.props = preset.props;\r\n\r\n      this._bindToParentNode();\r\n    }\r\n\r\n    _bindToParentNode() {\r\n      this.parentElement.childList.push(this);\r\n      if(this instanceof PIXI.DisplayObject) {\r\n        if(this.parentElement instanceof PIXI.DisplayObject) {\r\n          this.parentElement.addChild(this);\r\n        }\r\n        else {\r\n          this.parentElement.stage.addChild(this);\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add tag to tags list and app mixin props\r\n     * @memberof markus.mixins.Element\r\n     * @param props {string} tagName\r\n     */\r\n    addTag(tag) {\r\n      if(this.tags.indexOf(tag) === -1) {\r\n        this.tags.push(tag);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Remove tag from tags list and reuse mixins props\r\n     * @memberof markus.mixins.Element\r\n     * @param props {string} tagName\r\n     */\r\n    removeTag(tag) {\r\n      let index = this.tags.indexOf(tag);\r\n      if(index !== -1) {\r\n        this.tags.splice(index, 1);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set props to element\r\n     * @memberof markus.mixins.Element\r\n     * @param props {Object} Props object\r\n     */\r\n    setProps(props) {\r\n      for(let key in props) {\r\n        // call custom prop plugins\r\n        // for(let plug in propPlugins) {\r\n        //   if(propPlugins[plug](this, key, props)) {\r\n        //     continue propsEach;\r\n        //   }\r\n        // }\r\n        //\r\n        //\r\n\r\n        if(typeof props[key] === 'function') {\r\n          props[key].call(this);\r\n        }\r\n\r\n        // parse events prop\r\n        else if(key === 'on' && typeof props[key] === 'object') {\r\n          for(let event in props[key]) {\r\n            this.on(event, () => {\r\n              this.setProps(props[key][event]);\r\n            });\r\n          }\r\n        }\r\n\r\n        else if(Array.isArray(this[key])) {\r\n          this[key] = this[key].concat(props[key]);\r\n        }\r\n\r\n        else if(typeof this[key] === 'object' && this[key] != null && this[key].set) {\r\n          if(typeof props[key] === 'object') {\r\n            this[key].x = props[key].x;\r\n            this[key].y = props[key].y;\r\n          }\r\n          else {\r\n            this[key].set(props[key]);\r\n          }\r\n        }\r\n\r\n        else if(typeof this[key] === 'object' && this[key] != null && typeof props[key] === 'object') {\r\n          Object.assign(this[key], props[key]);\r\n        }\r\n\r\n        else {\r\n          this[key] = props[key];\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add function to ticks array\r\n     * @memberof markus.mixins.Element\r\n     * @param cb {funciton} Every tick is called\r\n     */\r\n    addTick(cb) {\r\n      this.ticks.push(cb);\r\n    }\r\n\r\n    /**\r\n     * Main tick method. Each tick is called in view.updateElements\r\n     * @memberof markus.mixins.Element\r\n     * @private\r\n     */\r\n    tick(dt) {\r\n      for(let i = 0; i < this.ticks.length; i++) {\r\n        this.ticks[i](dt);\r\n      }\r\n    }\r\n  };\r\n}\r\n","import Element from '../mixins/Element';\r\n\r\n/**\r\n * Main class for the entire visible tree of elements.\r\n * @example\r\n * app\r\n *  &#64;w 1280\r\n *  &#64;h 720\r\n *  &#64;color 0xFFFFFF\r\n *  &#64;smooth off\r\n *\r\n * // activate children presets\r\n * mark.get('app').init();\r\n *\r\n * @class\r\n * @mixes markus.mixins.Element\r\n * @memberof markus.elements\r\n * @augments PIXI.Application\r\n */\r\nexport default class App extends Element(PIXI.Application) {\r\n  constructor(preset) {\r\n    super(preset, {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n      sharedTicker: false,\r\n      sharedLoader: false\r\n    });\r\n\r\n    /**\r\n     * Resolution coef\r\n     * @member {number}\r\n     */\r\n    this.resolution = null;\r\n\r\n    this.width = 1920;\r\n    this.height = 1080;\r\n\r\n    document.body.appendChild(this.view);\r\n    document.body.style = 'padding: 0; margin: 0; overflow: hidden; background: #000;';\r\n    window.addEventListener('resize', () => this._resize(this));\r\n  }\r\n\r\n  /**\r\n   * Renderer backgroundColor\r\n   * @member {number}\r\n   */\r\n  set color(v) {\r\n    this.renderer.backgroundColor = +v;\r\n  }\r\n  get color() {\r\n    return this.renderer.backgroundColor;\r\n  }\r\n\r\n  /**\r\n   * Smooth textures in pixi\r\n   * @member {bolleon}\r\n   */\r\n  get smooth() {\r\n    return PIXI.settings.SCALE_MODE !== PIXI.SCALE_MODES.NEAREST;\r\n  }\r\n  set smooth(v) {\r\n    PIXI.settings.SCALE_MODE = v ? PIXI.SCALE_MODES.LINEAR : PIXI.SCALE_MODES.NEAREST;\r\n  }\r\n\r\n  /**\r\n   * Width game view\r\n   * @member {number}\r\n   */\r\n  set width(v) {\r\n    this._width = v;\r\n    this._resize();\r\n  }\r\n  get width() {\r\n    return this._width;\r\n  }\r\n\r\n  /**\r\n   * Height game view\r\n   * @member {number}\r\n   */\r\n  set height(v) {\r\n    this._height = v;\r\n    this._resize();\r\n  }\r\n  get height() {\r\n    return this._height;\r\n  }\r\n\r\n  _resize() {\r\n    this.resolution = window.innerWidth/this.width;\r\n    this.renderer.resize(window.innerWidth, this.height*this.resolution);\r\n    this.view.style.marginTop = window.innerHeight/2-this.height*this.resolution/2 + 'px';\r\n    this.stage.scale.set(this.resolution);\r\n  }\r\n\r\n  /**\r\n   * Initial app elements\r\n   */\r\n  init() {\r\n    this.mark.add(this.presets, this);\r\n  }\r\n}\r\n","import Element from '../mixins/Element';\r\n\r\n/**\r\n * Implementing resource-loader for markusJS. Item properties are a resource for loading.\r\n * @example\r\n * resources\r\n *   &#64;level level.json\r\n *   &#64;sprites sprites.json\r\n *   &#64;bg bg.png\r\n *\r\n * mark.get('resources').load(() => {\r\n *   mark.get('app').init();\r\n * });\r\n *\r\n * @class\r\n * @mixes markus.mixins.Element\r\n * @memberof markus.elements\r\n * @augments PIXI.loaders.Loader\r\n */\r\nexport default class Resources extends Element(PIXI.loaders.Loader) {\r\n  constructor(preset) {\r\n    super(preset);\r\n\r\n    for(let key in this.props) {\r\n      this.add(key, this.props[key]);\r\n    }\r\n    this.props = {};\r\n  }\r\n}\r\n","import Element from '../mixins/Element';\r\n\r\n/**\r\n * Class store all mixin properties of elements\r\n * @example\r\n * mixins\r\n *  .label\r\n *    &#64;size 120\r\n *\r\n *  sprite.quad\r\n *    &#64;width 100\r\n *    &#64;height 100\r\n *\r\n * @class\r\n * @mixes markus.mixins.Element\r\n * @memberof markus.elements\r\n */\r\nexport default class Mixins extends Element() {\r\n  constructor(preset) {\r\n    super(preset);\r\n\r\n    /**\r\n     * Mixins array.\r\n     * @member {Object[]}\r\n     */\r\n    this.mixins = this.presets;\r\n  }\r\n\r\n  /**\r\n   * Merging mixin with elements props\r\n   * @prop elm {Element} Element for merge\r\n   * @prop [props={}] {Object} Element props\r\n   * @returns {Object} merged elm props with mixin props\r\n   */\r\n  merge(elm, props={}) {\r\n    let parseProps = {};\r\n    for(let i = 0; i < this.mixins.length; i++) {\r\n      if(this.mark.isSelectorOfElement(this.mixins[i], elm)) {\r\n        for(let key in this.mixins[i].props) {\r\n          if(Array.isArray(props[key])) {\n            parseProps[key] = props[key].concat(this.mixins[i].props[key]);\n          }\r\n          else {\n            parseProps[key] = this.mixins[i].props[key];\n          }\r\n        }\r\n      }\r\n    }\r\n    return Object.assign({}, props, parseProps);\r\n  }\r\n\r\n  /**\r\n   * Set mixin to store\r\n   * @prop selector {string} Mixin selector\r\n   * @prop props {Object} Mixin props\r\n   */\r\n  set(selector, props) {\r\n    this.mixins[selector] = props;\r\n  }\r\n}\r\n","import Element from '../mixins/Element';\r\n\r\n/**\r\n * Implementing localStorage for MarkusJS. Properties of this element are saved in localStorage\r\n * @example\r\n * store\r\n *   &#64;level 1\r\n *   &#64;lang ru\r\n *   &#64;hero Atlant\r\n *\r\n * @class\r\n * @mixes markus.mixins.Element\r\n * @memberof markus.elements\r\n */\r\nexport default class Store extends Element() {\r\n  constructor(preset) {\r\n    super(preset);\r\n\r\n    for(let key in this.props) {\r\n      this.set(key, this.props[key]);\r\n    }\r\n    this.props = {};\r\n  }\r\n\r\n  /**\r\n   * Get item to localStorage\r\n   * @prop name {string} item name\r\n   * @prop val {any} item value\r\n   */\r\n  set(name, val) {\r\n    localStorage.setItem(name, JSON.stringify(val));\r\n  }\r\n\r\n  /**\r\n   * Get item from localStorage\r\n   * @prop name {string} Item name\r\n   * @returns {any} Item value from localStorage\r\n   */\r\n  get(name) {\r\n    return JSON.parse(localStorage.getItem(name));\r\n  }\r\n}\r\n","import Element from '../mixins/Element';\r\n\r\n/**\r\n * Scenes Manager for MarkusJS. Children of this element are separate scenes that can be switched.\r\n * @example\r\n * scenes(scene = A)\r\n *   block(id=A)\r\n *     text | SCENE A\r\n *   block(id=B)\r\n *     text | SCENE B\r\n *\r\n * mark.get('scenes').scene = 'B';\r\n *\r\n * @class\r\n * @mixes markus.mixins.Element\r\n * @memberof markus.elements\r\n * @augments PIXI.Container\r\n */\r\nexport default class Scenes extends Element(PIXI.Container) {\r\n  constructor(preset) {\r\n    super(preset);\r\n\r\n    /**\r\n     * Scenes presets\r\n     * @member {Preset[]}\r\n     */\r\n    this.scenes = this.presets;\r\n  }\r\n\r\n  /**\r\n   * Editable prop. Current scene id\r\n   * @member {string}\r\n   */\r\n  set scene(id) {\r\n    for(let i = 0; i < this.scenes.length; i++) {\r\n      if(this.scenes[i].id === id) {\r\n        this._scene && this.mark.remove(this._scene, this);\r\n        this._scene = this.mark.add(this.scenes[i], this);\r\n      }\r\n    }\r\n  }\r\n  get scene() {\r\n    return this._scene;\r\n  }\r\n}\r\n","import Element from './Element';\r\n\r\n/**\r\n * Mixin for additional functionality for all pixi elements\r\n *\r\n * @class\r\n * @name Display\r\n * @param superclass {Class} Parent class\r\n * @mixes markus.mixins.Element\r\n * @memberof markus.mixins\r\n *\r\n * @example\r\n * let containerWithDisplayAndElementMix = new markus.mixins.Display(PIXI.Container);\r\n * containerWithDisplayAndElementMix({view, parent, ...preset}, argForParentClass);\r\n */\r\nexport default function Display(superclass) {\r\n  return class extends Element(superclass) {\r\n    constructor(preset, arg) {\r\n      super(preset, arg);\r\n\r\n      this.app = this.mark.get('app');\r\n\r\n      /**\r\n       * The width of the area of allowable positions children of the element\r\n       * @member {number}\r\n       * @memberof markus.mixins.Display\r\n       */\r\n      this.contentW = this.app.width;\r\n\r\n      /**\r\n       * The height of the area of allowable positions children of the element\r\n       * @member {number}\r\n       * @memberof markus.mixins.Display\r\n       */\r\n      this.contentH = this.app.height;\r\n\r\n      this.addTick(() => this._computedPosition());\r\n    }\r\n\r\n    /**\r\n     * Angle in degrees\r\n     * @memberof markus.mixins.Display\r\n     * @member {number}\r\n     */\r\n    set angle(v) {\r\n      this.rotation = v*PIXI.DEG_TO_RAD;\r\n    }\r\n    get angle() {\r\n      return this.rotation*PIXI.RAD_TO_DEG;\r\n    }\r\n\r\n\r\n    /**\r\n     * Short setter for width\r\n     * @memberof markus.mixins.Display\r\n     * @member {number}\r\n     */\r\n    set w(v) {\r\n      this.width = v;\r\n    }\r\n\r\n    /**\r\n     * Short setter for height\r\n     * @memberof markus.mixins.Display\r\n     * @member {number}\r\n     */\r\n    set h(v) {\r\n      this.height = v;\r\n    }\r\n\r\n    /**\r\n     * Positioning the element relative to the left edge of the parent\r\n     * @memberof markus.mixins.Display\r\n     * @member {number}\r\n     */\r\n    set left(v) {\r\n      this._right = null;\r\n      this._centerX = null;\r\n      this._left = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get left() {\r\n      return this._left;\r\n    }\r\n\r\n    /**\r\n     * Positioning the element relative to the right edge of the parent\r\n     * @memberof markus.mixins.Display\r\n     * @member {number}\r\n     */\r\n    set right(v) {\r\n      this._left = null;\r\n      this._centerX = null;\r\n      this._right = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get right() {\r\n      return this._right;\r\n    }\r\n\r\n    /**\r\n     * Positioning the element relative to the horizontal center of the parent\r\n     * @memberof markus.mixins.Display\r\n     * @member {number}\r\n     */\r\n    set centerX(v) {\r\n      this._left = null;\r\n      this._right = null;\r\n      this._centerX = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get centerX() {\r\n      return this._centerX;\r\n    }\r\n\r\n    /**\r\n     * Positioning the element relative to the horizontal and vertical center of the parent\r\n     * @memberof markus.mixins.Display\r\n     * @member {number}\r\n     */\r\n    get centerXY() {\r\n      return this._centerX === this._centerY ? this._centerX : null;\r\n    }\r\n    set centerXY(v) {\r\n      this.centerX = v;\r\n      this.centerY = v;\r\n    }\r\n\r\n\r\n    /**\r\n     * Positioning the element relative to the top edge of the parent\r\n     * @memberof markus.mixins.Display\r\n     * @member {v}\r\n     */\r\n    set top(v) {\r\n      this._bottom = null;\r\n      this._centerY = null;\r\n      this._top = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get top() {\r\n      return this._top;\r\n    }\r\n\r\n\r\n    /**\r\n     * Positioning the element relative to the bottom edge of the parent\r\n     * @memberof markus.mixins.Display\r\n     * @member {number}\r\n     */\r\n    set bottom(v) {\r\n      this._top = null;\r\n      this._centerY = null;\r\n      this._bottom = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get bottom() {\r\n      return this._bottom;\r\n    }\r\n\r\n    /**\r\n     * Positioning the element relative to the vertical center of the parent\r\n     * @memberof markus.mixins.Display\r\n     * @member {number}\r\n     */\r\n    set centerY(v) {\r\n      this._top = null;\r\n      this._bottom = null;\r\n      this._centerY = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get centerY() {\r\n      return this._centerY;\r\n    }\r\n\r\n    _computedPosition() {\r\n      let w = this.parentElement.contentW || this.app.width;\r\n      let h = this.parentElement.contentH || this.app.height;\r\n\r\n      if(this.left != null) {\n        this.x = this.left;\n      }\r\n      else if(this.centerX != null) {\n        this.x = w/2+this.centerX;\n      }\r\n      else if(this.right != null) {\n        this.x = w-this.right;\n      }\r\n\r\n      if(this.top != null) {\n        this.y = this.top;\n      }\r\n      else if(this.centerY != null) {\n        this.y = h/2+this.centerY;\n      }\r\n      else if(this.bottom != null) {\n        this.y = h-this.bottom;\n      }\r\n\r\n      if(this.parentElement.anchor) {\r\n        this.x = this.x-w*this.parentElement.anchor.x;\r\n        this.y = this.y-h*this.parentElement.anchor.y;\r\n      }\r\n    }\r\n  };\r\n}\r\n","import Display from '../mixins/Display';\r\n\r\n/**\r\n * Implementing PIXI.Sprite for markusJS\r\n * @example\r\n * sprite(src=image.png)\r\n *\r\n * @class\r\n * @mixes markus.mixins.Display\r\n * @memberof markus.elements\r\n * @augments PIXI.Sprite\r\n */\r\n\r\nexport default class Sprite extends Display(PIXI.Sprite) {\r\n  constructor(preset) {\r\n    super(preset, PIXI.Texture.WHITE);\r\n\r\n    this.contentW = this.width;\r\n    this.contentH = this.height;\r\n    this.mark.add(this.presets, this);\r\n  }\r\n\r\n  /**\r\n   * Sprite texture source\r\n   * @member {string}\r\n   */\r\n  get src() {\r\n    return this._src;\r\n  }\r\n  set src(v) {\r\n    if(v == null) {\r\n      return;\r\n    }\r\n\r\n    this._src = v;\r\n    this.texture = PIXI.Texture.fromImage(v);\r\n  }\r\n}\r\n","import Sprite from './Sprite';\r\n\r\n/**\r\n * Sprite with button behavior\r\n * @example\r\n * button(src=button.png)\r\n *  &#64;toScene=scene_id\r\n *    text | CLICK ME\r\n *\r\n * @class\r\n * @memberof markus.elements\r\n * @augments markus.elements.Sprite\r\n */\r\nexport default class Button extends Sprite {\r\n  constructor(preset) {\r\n    super(preset);\r\n\r\n    /**\r\n     * toggle scene in scenes manager then button call pointertap event\r\n     * @memberof {markus.elements.Button}\r\n     * @member {string}\r\n     */\r\n    this.toScene = null;\r\n\r\n    /**\r\n     * texture button in active state\r\n     * @memberof {markus.elements.Button}\r\n     * @member {string}\r\n     */\r\n    this.activeSrc = this.src;\r\n\r\n    /**\r\n     * texture button in inactive state\r\n     * @memberof {markus.elements.Button}\r\n     * @member {string}\r\n     */\r\n    this.inactiveSrc = this.src;\r\n\r\n    this.enable = true;\r\n    this.on('pointertap', () => {\r\n      if(this.toScene) {\n        this.mark.get('scenes').scene = this.toScene;\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Toggle interactive state\r\n   * @memberof {markus.elements.Button}\r\n   * @member {booleon}\r\n   */\r\n  set enable(v) {\r\n    this.interactive = v;\r\n    this.buttonMode = v;\r\n    this.src = (v ? this.activeSrc  : this.inactiveSrc) || this.src;\r\n  }\r\n  get enable() {\r\n    return this.interactive;\r\n  }\r\n}\r\n","import Display from '../mixins/Display';\r\n\r\n/**\r\n * Container with additional logic positioning for children\r\n * @example\r\n * block\r\n *  &#64;inlineItems\r\n *  &#64;itemsMarginX 10\r\n *  &#64;itemsMarginX 10\r\n *  &#64;contentW 300\r\n *  &#64;contentH 300\r\n *  &#64;anchorX .5\r\n *  &#64;anchorY .5\r\n *    sprite(src=image.png)\r\n *    sprite(src=image.png)\r\n *    sprite(src=image.png)\r\n\r\n * @class\r\n * @mixes markus.mixins.Display\r\n * @memberof markus.elements\r\n * @augments PIXI.Container\r\n */\r\nexport default class Block extends Display(PIXI.Container) {\r\n  constructor(preset) {\r\n    super(preset);\r\n\r\n    /**\r\n     * Position items as a inline list.\r\n     * @memberof {markus.elements.Block}\r\n     * @member {booleon}\r\n     */\r\n    this.inlineItems = false;\r\n\r\n    /**\r\n     * Indent by x for elements in inline positioning\r\n     * @memberof {markus.elements.Block}\r\n     * @member {number}\r\n     */\r\n    this.itemsMarginX = 0;\r\n\r\n    /**\r\n     * Indent by y for elements in inline positioning\r\n     * @memberof {markus.elements.Block}\r\n     * @member {number}\r\n     */\r\n    this.itemsMarginY = 0;\r\n\r\n    /**\r\n     * anchor by x positioning the block relative to contentW\r\n     * @memberof {markus.elements.Block}\r\n     * @member {number}\r\n     */\r\n    this.anchorX = 0;\r\n\r\n    /**\r\n     * anchor by y positioning the block relative to contentW\r\n     * @memberof {markus.elements.Block}\r\n     * @member {number}\r\n     */\r\n    this.anchorY = 0;\r\n\r\n\r\n    this.mark.add(this.presets, this);\r\n    this.addTick(() => this._computedBlock());\r\n  }\r\n\r\n  _computedBlock() {\r\n    // computed position with anchor\r\n    this.x = this.x-this.contentW*this.anchorX;\r\n    this.y = this.y-this.contentH*this.anchorY;\r\n\r\n    if(!this.inlineItems) {\n      return;\n    }\r\n\r\n    // computed position for inline items\r\n    let x = 0, y = 0;\r\n    let maxh = 0;\r\n    for(let i = 0; i < this.children.length; i++) {\r\n      let el = this.children[i];\r\n      let anchorX = el.anchor ? el.anchor.x : el.anchorX;\r\n      let anchorY = el.anchor ? el.anchor.y : el.anchorY;\r\n\r\n      el.x = x+el.width*anchorX;\r\n      x += el.width+this.itemsMarginX;\r\n      maxh = Math.max(maxh, el.height);\r\n      if(x > this.contentW) {\r\n        el.x = el.width*anchorX;\r\n        x = el.width+this.itemsMarginX;\r\n        y += maxh+this.itemsMarginY;\r\n      }\r\n      el.y = y+el.height*anchorY;\r\n    }\r\n  }\r\n}\r\n","import Display from '../mixins/Display';\r\n\r\n/**\r\n * Implementing PIXI.Text for MarkusJS.\r\n * @example\r\n * text | SOME TEXT VALUE\r\n *   &#64;size 100\r\n *   &#64;font Bebas Neue\r\n *   &#64;color #fff\r\n *\r\n * @class\r\n * @mixes markus.mixins.Display\r\n * @memberof markus.elements\r\n * @augments PIXI.Text\r\n */\r\nexport default class Text extends Display(PIXI.Text) {\r\n  constructor(preset) {\r\n    super(preset, preset.value);\r\n  }\r\n\r\n  /**\r\n   * Size text\r\n   * @member {number}\r\n  */\r\n  get size() {\r\n    return this.style.fontSize;\r\n  }\r\n  set size(v) {\r\n    this.style.fontSize = v;\r\n  }\r\n\r\n  /**\r\n   * Fill color text\r\n   * @member {string}\r\n   */\r\n  get color() {\r\n    return this.style.fill;\r\n  }\r\n  set color(v) {\r\n    this.style.fill = v;\r\n  }\r\n\r\n  /**\r\n   * Font family\r\n   * @member {string}\r\n   */\r\n  get font() {\r\n    return this.style.fontFamily;\r\n  }\r\n  set font(v) {\r\n    this.style.fontFamily = v;\r\n  }\r\n}\r\n","/**\r\n * @namespace markus.elements\r\n */\r\n\r\nexport { default as App } from './App';\r\nexport { default as Resources } from './Resources';\r\nexport { default as Mixins } from './Mixins';\r\nexport { default as Store } from './Store';\r\n\r\nexport { default as Scenes } from './Scenes';\r\nexport { default as Button } from './Button';\r\n\r\nexport { default as Block } from './Block';\r\nexport { default as Sprite } from './Sprite';\r\nexport { default as Text } from './Text';\r\n","/**\r\n * @namespace markus.mixins\r\n */\r\n\r\nexport { default as Element } from './Element';\r\nexport { default as Display } from './Display';\r\n","/**\r\n  * Additional logic for the properties of the element. Plugins are called every time a property is passed to an element.\r\n  *\r\n  * @example\r\n  * function plugin(el, keyProp, allProps) {\r\n  *  if(allProps[keyProp] === 'somevalue') {\r\n  *    // do somethin\r\n  *    return true // if true, the property will no longer be processed by other plugins.\r\n  *  }\r\n  * }\r\n  * @namespace markus.propPlugins\r\n*/\r\n\r\n\r\n/**\r\n * Replaces appW to application width and appH to application height.\r\n * @memberof markus.propPlugins\r\n * @arg el {Element}\r\n * @arg key {string}\r\n * @arg props {Object}\r\n*/\r\nfunction fullsize(el, key, props) {\r\n  if(props[key] === 'appW') {\n    props[key] = el.mark.get('app').width;\n  }\r\n  else if(props[key] === 'appH') {\n    props[key] = el.mark.get('app').height;\n  }\r\n}\r\n\r\n/**\r\n * Print prop \"consolelog\" value to console. Return true\r\n * @memberof markus.propPlugins\r\n * @arg el {Element}\r\n * @arg key {string}\r\n * @arg props {Object}\r\n */\r\nfunction print(el, key, props) {\r\n  if(key === 'consolelog') {\r\n    window.console.log(props[key]);\r\n    return true;\r\n  }\r\n}\r\n\r\nexport {\r\n  fullsize, print\r\n};\r\n","/**\r\n * @namespace markus.utils\r\n */\r\n\r\n/**\r\n * Checks if a subset belongs to a set\r\n * @memberof markus.utils\r\n * @param {Array} set - Given set\r\n * @param {Array} subset - Given subset\r\n * @returns {booleon}\r\n * @example\r\n * // return false\r\n * isSubsetArray([1, 2, 3, 5], [1, 4])\r\n */\r\nfunction isSubsetArray(set, subset) {\r\n  for(let i = 0; i < subset.length; i++) {\r\n    let isInclude = false;\r\n    for(let j = 0; j < set.length; j++) {\r\n      if(set[j] === subset[i]) {\r\n        isInclude = true;\r\n        break;\r\n      }\r\n    }\r\n    if(!isInclude) {\n      return false;\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nexport {isSubsetArray};\r\n","import * as elements from './elements/index';\r\nimport * as mixins from './mixins/index';\r\nimport * as propPlugins from './propPlugins';\r\nimport * as utils from './utils';\r\n\r\n/**\r\n * Add new elements\r\n * @static\r\n * @memberof markus\r\n * @param elms {Element[]} Your custom elements to be used in the markfile\r\n */\r\nfunction registerElements(elms) {\r\n  Object.assign(elements, elms);\r\n}\r\n\r\n/**\r\n * Add new prop plugins\r\n * @memberof markus\r\n * @static\r\n * @param plugs {Object[]} Your custom elements to be used in the markfile\r\n */\r\nfunction registerPropPlugins(plugs) {\r\n  Object.assign(propPlugins, plugs);\r\n}\r\n\r\nexport {\r\n  elements,\r\n  propPlugins,\r\n  mixins,\r\n  utils,\r\n  registerElements,\r\n  registerPropPlugins\r\n};\r\n","import Parser from './Parser';\r\nimport {elements} from './main';\r\nimport {isSubsetArray} from './utils';\r\n\r\n/**\r\n * The root element of the entire tree of objects. Responsible for loading the tree and manipulating the elements.\r\n * @example\r\n * const mark = new markus.View('view.mark', () => {\r\n *   mark.get('resources').load(() => {\r\n *     mark.get('app').start();\r\n *   });\r\n * }, [Player, Bottle, EnemyController]);\r\n * @class\r\n * @memberof markus\r\n * @param [filepath] {string} File path to main markfile\r\n * @param [onReady] {function} Called when the markfile is loaded and the rendering\r\n */\r\nexport default class View {\r\n  constructor(filepath, onReady) {\r\n    /**\r\n     * Root child list which contains all the root elements of the mark file\r\n     * @member {Element[]}\r\n     */\r\n    this.childList = [];\r\n\r\n    /**\r\n     * Marklang parser\r\n     * @member {markus.Parser}\r\n     */\r\n    this.parser = new Parser('ajax');\r\n    if(filepath) {\r\n      this.parser.parseMarkfile(filepath).then(tree => {\r\n        this.add(tree);\r\n        onReady && onReady(this);\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Main ticker for update all elements. Initially active.\r\n     * @member {PIXI.ticker.Ticker}\r\n     */\r\n    this.ticker = new PIXI.ticker.Ticker();\r\n    this.ticker.add(dt => this.updateElements(dt));\r\n    this.ticker.start();\r\n  }\r\n\r\n  /**\r\n   * Update all elements in root childList\r\n   * @private\r\n   * @param dt {number} Delta time\r\n   * @param [elms=view.childList] {Array} Array of element\r\n   */\r\n  updateElements(dt, elms=this.childList) {\r\n    for(let i = 0; i < elms.length; i++) {\r\n      elms[i].tick && elms[i].tick(dt);\r\n      this.updateElements(dt, elms[i].childList);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Add elements to parent node\r\n   * @param value {(string|string[]|Preset|Preset[])} Elements to be added can be either a string or an array of marklang markup strings, or a Preset or an array of Presets.\r\n   * @param [parent=view] {Element} Parent element\r\n   * @returns {(Element|Element[])} Returns added items\r\n   *\r\n   * @example\r\n   * mark.add('enemy.zombie(level=23)', enemyController);\r\n   * mark.add(['sprite.tag(prop=1)', 'text | SOME TEXT']);\r\n   * mark.add([presetEnemy, presetEnemy], enemyController);\r\n   * mark.add(presetEnemy, enemyController);\r\n   */\r\n  add(value, parent=this) {\r\n    if(!Array.isArray(value)) {\r\n      return this.addPreset(value, parent);\r\n    }\r\n\r\n    let res = [];\r\n    for(let i = 0; i < value.length; i++) {\r\n      let preset = value[i];\r\n      if(typeof preset === 'string') {\r\n        preset = this.parser.parsePreset(preset);\r\n      }\r\n      res.push(this.addPreset(preset, parent));\r\n    }\r\n    return res;\r\n  }\r\n\r\n\r\n  /**\r\n   * Add Preset to parent node\r\n   * @param preset {Preset} Preset object\r\n   * @param [parent=view] {Element} Parent element\r\n   * @returns {Element} Returns added element\r\n   */\r\n  addPreset(preset={}, parent=this) {\r\n    if(preset.type !== 'elementNode') {\n      throw Error('Preset cannot be activate. His type is not elementNode');\n    }\r\n\r\n    let elementName = preset.element.slice(0, 1).toUpperCase() + preset.element.slice(1);\r\n    let elmCtor = elements[elementName] || elements[preset.element];\r\n\r\n    if(!elmCtor) {\n      throw Error('Element \"' + preset.element + '\" is not defined');\n    }\r\n\r\n    // merge props with mixins\r\n    let props = preset.props;\r\n    if(this.get('mixins')) {\r\n      props = this.get('mixins').merge(preset, preset.props);\r\n    }\r\n\r\n    let elm = new elmCtor(Object.assign(preset, {parent: parent, view: this, props: props}));\r\n    elm.setProps(elm.props);\r\n    return elm;\r\n  }\r\n\r\n\r\n  /**\r\n   * Remove elements from parent node\r\n   * @param value {(string|string[]|Element|Element[])} Elements to be removed can be either a string or an array of marklang markup selectors strings, or a Element or an array of Elements.\r\n   * @param [parent=view] {Element} Parent element\r\n   * @returns {(Element|Element[])} Returns removed items\r\n   *\r\n   * @example\r\n   * mark.remove('enemy.zombie(level=23)', enemyController);\r\n   * mark.remove([Enemy, Enemy], enemyController);\r\n   * mark.remove(Enemy, enemyController);\r\n   */\r\n  remove(value, parent=this) {\r\n    if(!Array.isArray(value)) {\r\n      return this.removeElement(value, value.parentElement);\r\n    }\r\n\r\n    let res = [];\r\n    for(let i = 0; i < value.length; i++) {\r\n      let preset = value[i];\r\n      if(typeof preset === 'string') {\r\n        preset = this.get(preset, parent);\r\n      }\r\n      res.push(this.removeElement(preset, preset.parentElement));\r\n    }\r\n    return res;\r\n  }\r\n\r\n  /**\r\n   * Remove Element from parent node\r\n   * @param el {ELement} Element class\r\n   * @param [parent=view] {Element} Parent element\r\n   * @returns {Element} Returns removed element\r\n   */\r\n  removeElement(el, parent=this) {\r\n    let index = parent.childList.indexOf(el);\r\n    if(index !== -1) {\r\n      el.onRemove && el.onRemove();\r\n      parent.childList.splice(index, 1);\r\n      if(el instanceof PIXI.DisplayObject) {\r\n        if(parent instanceof PIXI.DisplayObject) {\n          parent.removeChild(el);\n        }\r\n        else {\n          parent.stage.removeChild(el);\n        }\r\n      }\r\n    }\r\n    return el;\r\n  }\r\n\r\n  /**\r\n   * Get element by selector\r\n   * @param selector {ELement} Element selector\r\n   * @param [parent=view] {Element} Parent element for search\r\n   * @returns {Element}\r\n   *\r\n   * @example\r\n   * mark.get('sprite.cat');\r\n   * > Sprite\r\n   *\r\n   * mark.get('sprite.cat.black');\r\n   * > null\r\n   */\r\n  get(selector, parent=this) {\r\n    let q = this.parser.parseQuery(selector);\r\n    return this.find(q, parent.childList);\r\n  }\r\n\r\n  /**\r\n   * Get elements by selector\r\n   * @param selector {ELement} Elements selector\r\n   * @param [parent=view] {Element} Parent element for search\r\n   * @returns {Element[]}\r\n   *\r\n   * @example\r\n   * mark.getAll('sprite.cat');\r\n   * > [Sprite, Sptite, Sprite]\r\n   *\r\n   * mark.getAll('#cat');\r\n   * > null\r\n   */\r\n  getAll(selector, parent=this) {\r\n    let q = this.parser.parseQuery(selector);\r\n    return this.find(q, parent.childList, true);\r\n  }\r\n\r\n  /**\r\n   * General method for searching items on request\r\n   * @param q {Object} Query object\r\n   * @param q.id {string} Query id\r\n   * @param q.element {string} Query element name\r\n   * @param q.tags {string[]} Query element tags\r\n   * @param elms {Element[]} List Elements\r\n   * @param [isAll=false] {booleon} Do I need to search for all elements by q\r\n   * @returns {(Element[]|Element)}\r\n   *\r\n   * @example\r\n   * mark.find({element: 'sprite', tags: ['cat'], mark.root, true});\r\n   * > [Sprite, Sptite, Sprite]\r\n   */\r\n  find(q, elms, isAll=false) {\r\n    let res = [];\r\n    for(let i = 0; i < elms.length; i++) {\r\n      if(this.isSelectorOfElement(q, elms[i])) {\r\n        if(isAll) {\n          res.push(elms[i]);\n        }\r\n        else {\n          return elms[i];\n        }\r\n      }\r\n\r\n      // If childList has children and the search is performed globally\r\n      if(elms[i].childList.length) {\r\n        let find = this.find(q, elms[i].childList, isAll);\r\n        if(!isAll && find) {\n          return find;\n        }\r\n        else {\n          res = res.concat(find);\n        }\r\n      }\r\n    }\r\n    return isAll ? res : null;\r\n  }\r\n\r\n  /**\r\n   * Checks if the request is suitable for the item\r\n   * @param q {Object} Query object\r\n   * @param q.id {string} Query id\r\n   * @param q.element {string} Query element name\r\n   * @param q.tags {string[]} Query element tags\r\n   * @param elm {Element} Checked Element\r\n   * @returns {booleon}\r\n   */\r\n  isSelectorOfElement(q, elm) {\r\n    let isEl = q.element ? q.element === elm.element : true;\r\n    let isId = q.id ? q.id === elm.id : true;\r\n    let isTags = isSubsetArray(elm.tags, q.tags);\r\n\r\n    return isEl && isId && isTags;\r\n  }\r\n}\r\n","/**\r\n * @namespace markus\r\n *\r\n*/\r\n\r\nexport {default as Parser} from './Parser.js';\r\nexport {default as View} from './View.js';\r\nexport * from './main';\r\n"],"names":["this","let","i","super","index"],"mappings":"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"}