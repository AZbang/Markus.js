{"version":3,"sources":["webpack://markus/webpack/universalModuleDefinition","webpack://markus/webpack/bootstrap","webpack://markus/./src/elements/Element.js","webpack://markus/./src/elements/Display.js","webpack://markus/./src/Parser.js","webpack://markus/./src/elements/index.js","webpack://markus/./src/index.js","webpack://markus/./src/View.js","webpack://markus/./src/elements/App.js","webpack://markus/./src/elements/Resources.js","webpack://markus/./src/elements/Styles.js","webpack://markus/./src/elements/Block.js","webpack://markus/./src/elements/Sprite.js","webpack://markus/./src/elements/Text.js","webpack://markus/./src/utils.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_superclass","_class2","view","parent","preset","arg","_this","_classCallCheck","this","_possibleConstructorReturn","__proto__","getPrototypeOf","mark","element","id","tags","presets","parentElement","childList","ticks","updateProps","props","push","PIXI","DisplayObject","addChild","stage","_inherits","_createClass","assign","_typeof","set","x","y","cb","dt","length","arguments","undefined","_class","superclass","_Element","data","global","marginX","marginY","addTick","_computedPosition","w","contentW","width","h","contentH","height","left","centerX","right","top","centerY","bottom","v","rotation","DEG_TO_RAD","RAD_TO_DEG","_right","_centerX","_left","_bottom","_centerY","_top","_Element2","default","_interopRequireDefault","Parser","loadType","filepath","Promise","resolve","imports","then","entry","getImports","files","Error","replace","path","parsePresets","split","generateTree","pathes","_this2","_loop","fetch","res","status","text","slice","all","tree","depth","j","type","_defineProperty","unshift","lines","parsePreset","line","getDepth","attr","getAttr","getElement","getTags","getValue","getId","getProps","test","Number","match","map","query","tag","prop","parseValue","find","_Display","_App","_Resources","_Styles","_Block","_Sprite","_Text","_Parser","_View","_elements","keys","forEach","_exportNames","elements","_interopRequireWildcard","_utils","View","onReady","customElms","registerElements","parser","parseMarkfile","add","ticker","Ticker","updateElements","start","elms","tick","Array","isArray","addPreset","console","log","removePreset","el","index","indexOf","splice","removeChild","selector","q","parseQuery","isAll","isSelectorOfElement","concat","elm","isEl","isId","isTags","isSubsetArray","App","innerWidth","innerHeight","sharedTicker","sharedLoader","document","body","appendChild","style","resolution","addEventListener","resize","Application","renderer","marginTop","scale","backgroundColor","settings","SCALE_MODE","SCALE_MODES","NEAREST","LINEAR","Resources","markus","loaders","Loader","Styles","styles","_Display2","Block","Container","Sprite","Texture","WHITE","_src","texture","fromImage","Text","fontSize","fill","fontFamily","subset","isInclude"],"mappings":"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","file":"markus.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"markus\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"markus\"] = factory();\n\telse\n\t\troot[\"markus\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","export default function Element(superclass=class{}) {\r\n  return class extends superclass {\r\n    constructor(view, parent, preset, arg) {\r\n      super(arg);\r\n\r\n      this.mark = view;\r\n      this.element = preset.element;\r\n      this.id = preset.id;\r\n      this.tags = preset.tags;\r\n      this.presets = preset.presets;\r\n      this.parentElement = parent;\r\n      this.value = preset.value;\r\n\r\n      this.childList = [];\r\n      this.ticks = [];\r\n\r\n      this.updateProps(preset.props);\r\n\r\n      parent && parent.childList.push(this);\r\n      if(this instanceof PIXI.DisplayObject) {\r\n        if(parent instanceof PIXI.DisplayObject) parent.addChild(this);\r\n        else parent.stage.addChild(this);\r\n      }\r\n    }\r\n\r\n    updateProps(props) {\r\n      this.mark.get('styles') && Object.assign(props, this.mark.get('styles').get(this));\r\n      for(let key in props) {\r\n        if(typeof this[key] === 'object') {\r\n          if(typeof props[key] === 'object') Object.assign(this[key], props[key]);\r\n          else if(this[key].set) this[key].set(props[key]);\r\n          if(props[key + 'X']) this[key].x = props[key + 'X'];\r\n          if(props[key + 'Y']) this[key].y = props[key + 'Y'];\r\n        } else this[key] = props[key];\r\n      }\r\n    }\r\n    addTick(cb) {\r\n      this.ticks.push(cb);\r\n    }\r\n    tick(dt) {\r\n      for(let i = 0; i < this.ticks.length; i++) {\r\n        this.ticks[i](dt);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Element from './Element';\r\n\r\nexport default function Display(superclass) {\r\n  return class extends Element(superclass) {\r\n    constructor(view, parent, data, arg) {\r\n      super(view, parent, data, arg);\r\n\r\n      // computed position relative parent block or global\r\n      this.global = false;\r\n\r\n      // position margin\r\n      this.marginX = 0;\r\n      this.marginY = 0;\r\n\r\n      this.addTick(() => this._computedPosition());\r\n    }\r\n\r\n    set angle(v) {\r\n      this.rotation = v*PIXI.DEG_TO_RAD;\r\n    }\r\n    get angle() {\r\n      return this.rotation*PIXI.RAD_TO_DEG;\r\n    }\r\n    set w(v) {\r\n      this.width = v;\r\n    }\r\n    set h(v) {\r\n      this.height = v;\r\n    }\r\n    set left(v) {\r\n      this._right = null;\r\n      this._centerX = null;\r\n      this._left = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get left() {\r\n      return this._left;\r\n    }\r\n\r\n    set right(v) {\r\n      this._left = null;\r\n      this._centerX = null;\r\n      this._right = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get right() {\r\n      return this._right;\r\n    }\r\n\r\n    set centerX(v) {\r\n      this._left = null;\r\n      this._right = null;\r\n      this._centerX = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get centerX() {\r\n      return this._centerX;\r\n    }\r\n\r\n    set top(v) {\r\n      this._bottom = null;\r\n      this._centerY = null;\r\n      this._top = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get top() {\r\n      return this._top;\r\n    }\r\n\r\n    set bottom(v) {\r\n      this._top = null;\r\n      this._centerY = null;\r\n      this._bottom = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get bottom() {\r\n      return this._bottom;\r\n    }\r\n\r\n    set centerY(v) {\r\n      this._top = null;\r\n      this._bottom = null;\r\n      this._centerY = v === true ? 0 : v === false ? null : v;\r\n    }\r\n    get centerY() {\r\n      return this._centerY;\r\n    }\r\n\r\n    _computedPosition() {\r\n      let w = this.parentElement.contentW || this.mark.get('app').width;\r\n      let h = this.parentElement.contentH || this.mark.get('app').height;\r\n\r\n      if(this.left != null) this.x = this.left;\r\n      else if(this.centerX != null) this.x = w/2+this.centerX;\r\n      else if(this.right != null) this.x = w-this.right;\r\n\r\n      if(this.top != null) this.y = this.top;\r\n      else if(this.centerY != null) this.y = h/2+this.centerY;\r\n      else if(this.bottom != null) this.y = h-this.bottom;\r\n    }\r\n  }\r\n}\r\n","export default class Parser {\r\n  constructor(data) {\r\n    this.loadType = data.loadType || 'ajax';\r\n  }\r\n  parseMarkfile(filepath) {\r\n    return new Promise((resolve) => {\r\n      this.imports([filepath]).then((data) => {\r\n        let entry = data[0].data;\r\n        let imports = this.getImports(entry);\r\n\r\n        this.imports(imports).then((files) => {\r\n          for(let i = 0; i < files.length; i++) {\r\n            if(this.getImports(files[i].data).length) throw Error('Imports are possible only in the entry file.')\r\n            entry = entry.replace('import ' + files[i].path, files[i].data);\r\n          }\r\n\r\n          let presets = this.parsePresets(entry.split('\\n'));\r\n          resolve(this.generateTree(presets));\r\n        })\r\n      })\r\n    })\r\n  }\r\n  imports(pathes) {\r\n    let files = [];\r\n    for(let i = 0; i < pathes.length; i++) {\r\n      if(this.loadType === 'ajax') {\r\n        files.push(fetch(pathes[i])\r\n          .then((res) => {\r\n            if(res.status === 404) throw Error('Markus module \"' + pathes[i] + '\" is not found');\r\n            return res.text()\r\n          }).then((data) => {\r\n            return {name: pathes[i].split('/').slice(-1)[0], path: pathes[i], data}\r\n          })\r\n        )\r\n      }\r\n    }\r\n    return Promise.all(files);\r\n  }\r\n  generateTree(presets) {\r\n    let tree = [];\r\n    for(let i = presets.length-1; i >= 0; i--) {\r\n      if(presets[i].depth !== 0) {\r\n        for(let j = i-1; j >= 0; j--) {\r\n          if(presets[j].depth < presets[i].depth) {\r\n\r\n            if(presets[i].type === 'valueNode') {\r\n              if(presets[j].type === 'elementNode')\r\n                presets[j].value = presets[i].value + (presets[j].value ? '\\n' + presets[j].value : '');\r\n              else if(presets[j].type === 'propNode') {\r\n                if(presets[j].value === true) presets[j].value = '';\r\n                presets[j].value = presets[i].value + (presets[j].value ? '\\n' + presets[j].value : '');\r\n              } else throw Error('valueNode cannot be a child of a ' + presets[j].type);\r\n            }\r\n\r\n            if(presets[i].type === 'propNode') {\r\n              if(presets[j].type === 'propNode') {\r\n                if(typeof presets[j].value !== 'object') presets[j].value = {value: presets[j].value};\r\n                Object.assign(presets[j].value, {[presets[i].name]: presets[i].value})\r\n              } else if(presets[j].type === 'elementNode') {\r\n                Object.assign(presets[j].props, {[presets[i].name]: presets[i].value})\r\n              } else throw Error('propNode cannot be a child of a ' + presets[j].type);\r\n            }\r\n\r\n            else if(presets[i].type === 'elementNode') {\r\n              if(presets[j].type === 'elementNode') presets[j].presets.unshift(presets[i]);\r\n              else throw Error('elementNode cannot be a child of a ' + presets[j].type);\r\n            }\r\n\r\n            break;\r\n          }\r\n        }\r\n      } else tree.push(presets[i]);\r\n    }\r\n    return   tree;\r\n  }\r\n  parsePresets(lines) {\r\n    let presets = [];\r\n    for(let i = 0; i < lines.length; i++) {\r\n      let preset = this.parsePreset(lines[i]);\r\n      if(preset != null) presets.push(preset);\r\n    }\r\n    return presets;\r\n  }\r\n  parsePreset(line) {\r\n    let type = 'elementNode';\r\n    let depth = this.getDepth(line);\r\n\r\n    // if line is attr node\r\n    let attr = this.getAttr(line);\r\n    if(attr) {\r\n      type = 'propNode';\r\n      return {type, depth, name: attr[0], value: attr[1]}\r\n    }\r\n\r\n    // else line is element, empty or value node\r\n    let element = this.getElement(line);\r\n    let tags = this.getTags(line);\r\n    let value = this.getValue(line);\r\n    let id = this.getId(line);\r\n    let props = [];\r\n\r\n    // if element is undefined, then line is block or value node\r\n    if(element == null) {\r\n      if(tags.length || id) element = '';\r\n      else if(value) type = 'valueNode';\r\n      else return;\r\n    }\r\n\r\n    // if line is elementNode, then parse props\r\n    if(type !== 'valueNode') {\r\n      props = this.getProps(line);\r\n    }\r\n\r\n    return {type, element, value, props, tags, id, depth, presets: []};\r\n  }\r\n  parseValue(value) {\r\n    if(value === 'on' || value === 'yes' || value === 'true') return true;\r\n    else if(value === 'off' || value === 'no' || value === 'false') return false;\r\n    else if(/^[-\\.\\+]?[0-9]+\\.?([0-9]+)?$/.test(value)) return Number(value);\r\n    return value;\r\n  }\r\n  getImports(data) {\r\n    return (data.match(/import .+/g) || []).map((v) => v.split(' ')[1]);\r\n  }\r\n  getDepth(line) {\r\n    return (line.match(/^[\\t ]+/) || [''])[0].length/2;\r\n  }\r\n  parseQuery(query) {\r\n    let tags = (query.match(/\\.\\w+/g) || []).map((tag) => tag.slice(1));\r\n    let id = (query.match(/\\#\\w+/) || [''])[0].slice(1);\r\n    let element = (query.match(/^\\w+/) || [])[0];\r\n    return {element, id, tags}\r\n  }\r\n  getElement(line) {\r\n    return (line.match(/^[\\t ]*(\\w+)/) || [])[1];\r\n  }\r\n  getTags(line) {\r\n    return (line.replace(/\\(.+\\)/, '').match(/\\.\\w+/g) || []).map((tag) => tag.slice(1));\r\n  }\r\n  getId(line) {\r\n    return (line.replace(/\\(.+\\)/, '').match(/#\\w+/) || [''])[0].slice(1);\r\n  }\r\n  getValue(line) {\r\n    return (line.match(/\\| *(.+)/) || [])[1] || '';\r\n  }\r\n  getAttr(line) {\r\n    let prop = line.match(/^[\\t ]*@(\\w+)(\\s(.+))?/);\r\n    if(prop) return [prop[1], prop[3] != null ? this.parseValue(prop[3]) : true]\r\n  }\r\n  getProps(line) {\r\n    let res = {};\r\n    let find = line.match(/\\((.+)\\)/g);\r\n    if(find == null) return {};\r\n\r\n    let props = find[0].split(/,\\s+/);\r\n    for(let key in props) {\r\n      let prop = props[key].replace('(', '').replace(')', '').split('=');\r\n      res[prop[0]] = prop[1] != null ? this.parseValue(prop[1]) : true;\r\n    }\r\n    return res;\r\n  }\r\n}\r\n","export { default as element } from './Element';\r\nexport { default as display } from './Display';\r\n\r\nexport { default as app } from './App';\r\nexport { default as resources } from './Resources';\r\nexport { default as styles } from './Styles';\r\n\r\nexport { default as block } from './Block';\r\nexport { default as sprite } from './Sprite';\r\nexport { default as text } from './Text';\r\n","export {default as Parser} from './Parser.js';\r\nexport {default as View} from './View.js';\r\nexport * from './elements';\r\n","import Parser from './Parser'\r\nimport * as elements from './elements'\r\nimport {isSubsetArray} from './utils'\r\n\r\nexport default class View {\r\n  constructor(filepath, onReady, customElms={}) {\r\n    this.elements = elements;\r\n    this.registerElements(customElms);\r\n\r\n    this.childList = [];\r\n\r\n    this.parser = new Parser({loadType: 'ajax'});\r\n    this.parser.parseMarkfile(filepath).then(tree => {\r\n      this.add(tree);\r\n      onReady && onReady(this);\r\n    });\r\n\r\n    this.ticker = new PIXI.ticker.Ticker();\r\n    this.ticker.add(dt => this.updateElements(dt));\r\n    this.ticker.start();\r\n  }\r\n\r\n  registerElements(elms) {\r\n    Object.assign(this.elements, elms);\r\n  }\r\n\r\n  updateElements(dt, elms=this.childList) {\r\n    for(let i = 0; i < elms.length; i++) {\r\n      elms[i].tick && elms[i].tick(dt);\r\n      this.updateElements(dt, elms[i].childList);\r\n    }\r\n  }\r\n\r\n  // add element\r\n  add(value, parent=this) {\r\n    if(typeof value === 'string') value = this.parser.parsePreset(value);\r\n    if(!Array.isArray(value)) value = [value];\r\n    for(let i = 0; i < value.length; i++) {\r\n      this.addPreset(value[i], parent);\r\n    }\r\n  }\r\n  addPreset(preset, parent=this) {\r\n    console.log(preset)\r\n    if(preset.type !== 'elementNode') throw Error('Preset cannot be activate. His type is not elementNode');\r\n    if(!this.elements[preset.element]) throw Error('Element \"' + preset.element + '\" is not defined');\r\n    new this.elements[preset.element](this, parent, preset);\r\n  }\r\n\r\n  // remove element\r\n  remove(value) {\r\n    if(typeof value === 'string') value = this.get(value, parent);\r\n    if(!Array.isArray(value)) value = [value];\r\n    for(let i = 0; i < value.length; i++) {\r\n      this.removePreset(value[i], value[i].parentElement);\r\n    }\r\n  }\r\n  removeElement(el, parent=this) {\r\n    let index = parent.childList.indexOf(el);\r\n    if(index !== -1) {\r\n      parent.childList.splice(index, 1);\r\n      if(el instanceof PIXI.DisplayObject) {\r\n        if(parent instanceof PIXI.DisplayObject) parent.removeChild(el);\r\n        else parent.stage.removeChild(el);\r\n      }\r\n    }\r\n  }\r\n\r\n  // find element\r\n  get(selector, parent=this) {\r\n    let q = this.parser.parseQuery(selector);\r\n    return this.find(q, parent.childList);\r\n  }\r\n  getAll(selector, parent=this) {\r\n    let q = this.parser.parseQuery(selector);\r\n    return this.find(q, parent.childList, true);\r\n  }\r\n  find(q, elms=[], isAll=false) {\r\n    let res = [];\r\n    for(let i = 0; i < elms.length; i++) {\r\n      if(this.isSelectorOfElement(q, elms[i])) {\r\n        if(isAll) res.push(elms[i]);\r\n        else return elms[i];\r\n      }\r\n\r\n      if(!elms[i].childList.length) {\r\n        let find = this.find(q, elms[i].childList, isAll);\r\n        if(!isAll && find) return find;\r\n        else res = res.concat(find);\r\n      }\r\n    }\r\n    return isAll ? res : null;\r\n  }\r\n  isSelectorOfElement(q, elm) {\r\n    let isEl = q.element ? q.element === elm.element : true;\r\n    let isId = q.id ? q.id === elm.id : true;\r\n    let isTags = isSubsetArray(elm.tags, q.tags);\r\n\r\n    return isEl && isId && isTags;\r\n  }\r\n}\r\n","import Element from './Element'\r\n\r\nexport default class App extends Element(PIXI.Application) {\r\n  constructor(view, parent, data) {\r\n    super(view, parent, data, {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n      sharedTicker: false,\r\n      sharedLoader: false\r\n    });\r\n\r\n    document.body.appendChild(this.view);\r\n    document.body.style = \"padding: 0; margin: 0; overflow: hidden; background: #000;\";\r\n\r\n    this.resolution = null;\r\n\r\n    window.addEventListener('resize', () => this.resize(this));\r\n    this.resize();\r\n  }\r\n  // properties\r\n  get color() {\r\n    return this.renderer.backgroundColor;\r\n  }\r\n  set color(v) {\r\n    this.renderer.backgroundColor = +v;\r\n  }\r\n  get smooth() {\r\n     return PIXI.settings.SCALE_MODE !== PIXI.SCALE_MODES.NEAREST;\r\n  }\r\n  set smooth(v) {\r\n    PIXI.settings.SCALE_MODE = v ? PIXI.SCALE_MODES.LINEAR : PIXI.SCALE_MODES.NEAREST;\r\n  }\r\n\r\n\r\n  init() {\r\n    this.mark.add(this.presets, this);\r\n  }\r\n  resize() {\r\n    this.resolution = window.innerWidth/this.width;\r\n    this.renderer.resize(window.innerWidth, this.height*this.resolution);\r\n    this.view.style.marginTop = window.innerHeight/2-this.height*this.resolution/2 + 'px';\r\n    this.stage.scale.set(this.resolution);\r\n  }\r\n}\r\n","import Element from './Element'\r\n\r\nexport default class Resources extends Element(PIXI.loaders.Loader) {\r\n  constructor(markus, root, data) {\r\n    super(markus, root, data);\r\n\r\n    for(let key in data.props) {\r\n      this.add(key, data.props[key]);\r\n    }\r\n  }\r\n}\r\n","import Element from './Element'\r\n\r\n\r\nexport default class Styles extends Element() {\r\n  constructor(markus, root, data) {\r\n    super(markus, root, data)\r\n    this.styles = data.presets;\r\n  }\r\n  get(elm) {\r\n    let props = {};\r\n    for(let i = 0; i < this.styles.length; i++) {\r\n      if(this.mark.isSelectorOfElement(this.styles[i], elm))\r\n        Object.assign(props, this.styles[i].props);\r\n    }\r\n    return props;\r\n  }\r\n  set(selector, props) {\r\n    this.styles[selector] = props;\r\n  }\r\n}\r\n","import Display from './Display'\r\n\r\nexport default class Block extends Display(PIXI.Container) {\r\n  constructor(markus, parent, data) {\r\n    super(markus, parent, data);\r\n\r\n    this.mark.add(data.presets, this);\r\n  }\r\n}\r\n","import Display from './Display'\r\n\r\nexport default class Sprite extends Display(PIXI.Sprite) {\r\n  constructor(mark, parent, data) {\r\n    super(mark, parent, data, PIXI.Texture.WHITE);\r\n  }\r\n  get src() {\r\n    return this._src;\r\n  }\r\n  set src(v) {\r\n    this._src = v;\r\n    this.texture = PIXI.Texture.fromImage(v);\r\n  }\r\n}\r\n","import Display from './Display'\r\n\r\nexport default class Text extends Display(PIXI.Text) {\r\n  constructor(view, parent, data) {\r\n    super(view, parent, data);\r\n\r\n    if(this.value) this.text = this.value;\r\n  }\r\n  get size() {\r\n    return this.style.fontSize;\r\n  }\r\n  set size(v) {\r\n    this.style.fontSize = v;\r\n  }\r\n  get color() {\r\n    return this.style.fill;\r\n  }\r\n  set color(v) {\r\n    this.style.fill = v;\r\n  }\r\n  get font() {\r\n    return this.style.fontFamily;\r\n  }\r\n  set font(v) {\r\n    this.style.fontFamily = v;\r\n  }\r\n}\r\n","export function isSubsetArray(set, subset) {\r\n  for(let i = 0; i < subset.length; i++) {\r\n    let isInclude = false;\r\n    for(let j = 0; j < set.length; j++) {\r\n      if(set[j] == subset[i]) {\r\n        isInclude = true;\r\n        break;\r\n      }\r\n    }\r\n    if(!isInclude) return false;\r\n  }\r\n  return true;\r\n}\r\n"],"sourceRoot":""}